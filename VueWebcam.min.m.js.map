{"version":3,"file":"VueWebcam.min.m.js","sources":["VueWebcam.js"],"sourcesContent":["// TODO:\n// 1. Enable mirror option\n// 2. Improve options handling\n// 3. Error handling\n\nimport Vue from 'vue';\n\nconst WebcamComponent = Vue.extend({\n  render: function (h) {\n    return h('video', {\n      ref: 'video',\n      attrs: {\n        width: this.width,\n        height: this.height,\n        src: this.src,\n        autoplay: this.autoplay\n      }\n    });\n  },\n\n  props: {\n    autoplay: {\n      type: Boolean,\n      default: true\n    },\n    width: {\n      type: Number,\n      default: 400\n    },\n    height: {\n      type: Number,\n      default: 300\n    },\n    mirror: {\n      type: Boolean,\n      default: true\n    },\n    screenshotFormat: {\n      type: String,\n      default: 'image/jpeg'\n    }\n  },\n\n  data () {\n    return {\n      video: '',\n      src: '',\n      stream: '',\n      hasUserMedia: false,\n      styleObject: {\n        transform: 'scale(-1, 1)',\n        filter: 'FlipH'\n      }\n    };\n  },\n\n  methods: {\n    getPhoto () {\n      if (!this.hasUserMedia) return null;\n\n      const canvas = this.getCanvas();\n      return canvas.toDataURL(this.screenshotFormat);\n    },\n    getCanvas () {\n      if (!this.hasUserMedia) return null;\n\n      const video = this.$refs.video;\n      if (!this.ctx) {\n        const canvas = document.createElement('canvas');\n        canvas.height = video.clientHeight;\n        canvas.width = video.clientWidth;\n        this.canvas = canvas;\n\n        this.ctx = canvas.getContext('2d');\n\n          /*if (this.mirror) {\n           const context = canvas.getContext('2d');\n           context.translate(canvas.width, 0);\n           context.scale(-1, 1);\n           this.ctx = context;\n           } else {\n           this.ctx = canvas.getContext('2d');\n           }*/\n      }\n\n      const { ctx, canvas } = this;\n      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n\n      return canvas;\n    }\n  },\n\n  mounted: function () {\n    this.video = this.$refs.video;\n    navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia || navigator.oGetUserMedia;\n\n    if (navigator.getUserMedia) {\n      navigator.getUserMedia({ video: true }, (stream) => {\n        try {\n          this.video.srcObject = stream;\n        } catch (error) {\n          this.src = window.URL.createObjectURL(stream);\n        }\n        this.stream = stream;\n        this.hasUserMedia = true;\n    }, (error) => {\n        console.log(error);\n      });\n    }\n  },\n\n  beforeDestroy: function () {\n    this.video.pause();\n    this.src = '';\n    this.stream && this.stream.getTracks()[0] && this.stream.getTracks()[0].stop();\n  },\n\n  destroyed: function () {\n    console.log('Destroyed');\n  }\n});\n\nconst VueWebcam = Vue.component('vue-webcam', WebcamComponent);\nexport default VueWebcam;\n"],"names":["const","WebcamComponent","Vue","extend","render","h","ref","attrs","width","this","height","src","autoplay","props","type","Boolean","default","Number","mirror","screenshotFormat","String","data","video","stream","hasUserMedia","styleObject","transform","filter","methods","getPhoto","getCanvas","toDataURL","$refs","ctx","canvas","document","createElement","clientHeight","clientWidth","getContext","drawImage","mounted","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","oGetUserMedia","srcObject","error","window","URL","createObjectURL","console","log","beforeDestroy","pause","getTracks","stop","destroyed","component"],"mappings":"mBAOAA,IAAMC,EAAkBC,EAAIC,QAC1BC,OAAQ,SAAUC,GAChB,OAAOA,EAAE,SACPC,IAAK,QACLC,OACEC,MAAOC,KAAKD,MACZE,OAAQD,KAAKC,OACbC,IAAKF,KAAKE,IACVC,SAAUH,KAAKG,aAKrBC,OACED,UACEE,KAAMC,QACNC,SAAS,GAEXR,OACEM,KAAMG,OACND,QAAS,KAEXN,QACEI,KAAMG,OACND,QAAS,KAEXE,QACEJ,KAAMC,QACNC,SAAS,GAEXG,kBACEL,KAAMM,OACNJ,QAAS,eAIbK,gBACE,OACEC,MAAO,GACPX,IAAK,GACLY,OAAQ,GACRC,cAAc,EACdC,aACEC,UAAW,eACXC,OAAQ,WAKdC,SACEC,oBACE,OAAKpB,KAAKe,aAEKf,KAAKqB,YACNC,UAAUtB,KAAKU,kBAHE,MAKjCW,qBACE,IAAKrB,KAAKe,aAAc,OAAO,KAE/BxB,IAAMsB,EAAQb,KAAKuB,MAAMV,MACzB,IAAKb,KAAKwB,IAAK,CACbjC,IAAMkC,EAASC,SAASC,cAAc,UACtCF,EAAOxB,OAASY,EAAMe,aACtBH,EAAO1B,MAAQc,EAAMgB,YACrB7B,KAAKyB,OAASA,EAEdzB,KAAKwB,IAAMC,EAAOK,WAAW,MAY/B,IAAaL,EAAWzB,YAGxB,OAHwBA,SACpB+B,UAAUlB,EAAO,EAAG,EAAGY,EAAO1B,MAAO0B,EAAOxB,QAEzCwB,IAIXO,QAAS,sBACPhC,KAAKa,MAAQb,KAAKuB,MAAMV,MACxBoB,UAAUC,aAAeD,UAAUC,cAAgBD,UAAUE,oBAAsBF,UAAUG,iBAAmBH,UAAUI,gBAAkBJ,UAAUK,cAElJL,UAAUC,cACZD,UAAUC,cAAerB,OAAO,YAASC,GACvC,IACEd,EAAKa,MAAM0B,UAAYzB,QAChB0B,GACPxC,EAAKE,IAAMuC,OAAOC,IAAIC,gBAAgB7B,GAExCd,EAAKc,OAASA,EACdd,EAAKe,cAAe,YACpByB,GACAI,QAAQC,IAAIL,MAKlBM,cAAe,WACb9C,KAAKa,MAAMkC,QACX/C,KAAKE,IAAM,GACXF,KAAKc,QAAUd,KAAKc,OAAOkC,YAAY,IAAMhD,KAAKc,OAAOkC,YAAY,GAAGC,QAG1EC,UAAW,WACTN,QAAQC,IAAI,+BAIEpD,EAAI0D,UAAU,aAAc3D"}